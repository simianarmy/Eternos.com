<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: RIO::IF::YAML</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <meta name="revisit-after" content="5 days">
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td class="class-mod"><strong>Module</strong></td>
          <td class="class-name-in-header">RIO::IF::YAML</td>
            <td rowspan="2" class="class-header-space-col"></td>
            <td rowspan="2">
                <a class="in-url" href="../../../files/lib/rio/if/yaml_rb.html">
                lib/rio/if/yaml.rb
                </a>
        &nbsp;&nbsp;
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000171">document</a>&nbsp;&nbsp;
      <a href="#M000168">documents</a>&nbsp;&nbsp;
      <a href="#M000176">dump</a>&nbsp;&nbsp;
      <a href="#M000172">getobj</a>&nbsp;&nbsp;
      <a href="#M000173">load</a>&nbsp;&nbsp;
      <a href="#M000170">object</a>&nbsp;&nbsp;
      <a href="#M000166">objects</a>&nbsp;&nbsp;
      <a href="#M000174">putobj</a>&nbsp;&nbsp;
      <a href="#M000175">putobj!</a>&nbsp;&nbsp;
      <a href="#M000169">skipdocuments</a>&nbsp;&nbsp;
      <a href="#M000167">skipobjects</a>&nbsp;&nbsp;
      <a href="#M000164">yaml</a>&nbsp;&nbsp;
      <a href="#M000165">yaml?</a>&nbsp;&nbsp;
      </div>
    </div>



    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000171" class="method-detail">
        <a name="M000171"></a>

        <div class="method-heading">
          <a href="YAML.src/M000171.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000171.html');return false;">
          <span class="method-name">document</span><span class="method-args">(*args,&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Select a single yaml document. See <a
href="YAML.html#M000168">documents</a>, <a
href="GrandeStream.html#M000071">line</a> and <a
href="YAML.html#M000164">yaml</a>.
</p>
        </div>
      </div>

      <div id="method-M000168" class="method-detail">
        <a name="M000168"></a>

        <div class="method-heading">
          <a href="YAML.src/M000168.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000168.html');return false;">
          <span class="method-name">documents</span><span class="method-args">(*selectors,&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Select documents from a <a href="YAML.html">YAML</a> file. See <a
href="YAML.html#M000164">yaml</a> and <a
href="../Doc/INTRO.html">RIO::Doc::INTRO</a>
</p>
        </div>
      </div>

      <div id="method-M000176" class="method-detail">
        <a name="M000176"></a>

        <div class="method-heading">
          <a href="YAML.src/M000176.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000176.html');return false;">
          <span class="method-name">dump</span><span class="method-args">(obj)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="YAML.html#M000175">putobj!</a>
</p>
        </div>
      </div>

      <div id="method-M000172" class="method-detail">
        <a name="M000172"></a>

        <div class="method-heading">
          <a href="YAML.src/M000172.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000172.html');return false;">
          <span class="method-name">getobj</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Calls <a href="YAML.html#M000173">YAML.load</a>.
</p>
<p>
Loads a single <a href="YAML.html">YAML</a> object from the stream
referenced by the Rio
</p>
<pre>
  rio('database.yml').yaml.getobj
</pre>
<p>
See <a href="YAML.html#M000164">yaml</a> and <a
href="../Doc/INTRO.html">RIO::Doc::INTRO</a>
</p>
        </div>
      </div>

      <div id="method-M000173" class="method-detail">
        <a name="M000173"></a>

        <div class="method-heading">
          <a href="YAML.src/M000173.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000173.html');return false;">
          <span class="method-name">load</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Calls <a href="YAML.html#M000173">YAML.load</a>.
</p>
<p>
Loads a single <a href="YAML.html">YAML</a> object from the stream
referenced by the Rio
</p>
<pre>
  rio('database.yml').yaml.load
</pre>
<p>
See <a href="YAML.html#M000164">yaml</a> and <a
href="../Doc/INTRO.html">RIO::Doc::INTRO</a>
</p>
        </div>
      </div>

      <div id="method-M000170" class="method-detail">
        <a name="M000170"></a>

        <div class="method-heading">
          <a href="YAML.src/M000170.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000170.html');return false;">
          <span class="method-name">object</span><span class="method-args">(*args,&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Select a single object. See <a href="YAML.html#M000166">objects</a>, <a
href="GrandeStream.html#M000071">line</a> and <a
href="YAML.html#M000164">yaml</a>.
</p>
        </div>
      </div>

      <div id="method-M000166" class="method-detail">
        <a name="M000166"></a>

        <div class="method-heading">
          <a href="YAML.src/M000166.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000166.html');return false;">
          <span class="method-name">objects</span><span class="method-args">(*selectors,&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Select objects from a <a href="YAML.html">YAML</a> file. See <a
href="YAML.html#M000164">yaml</a> and <a
href="../Doc/INTRO.html">RIO::Doc::INTRO</a>
</p>
        </div>
      </div>

      <div id="method-M000174" class="method-detail">
        <a name="M000174"></a>

        <div class="method-heading">
          <a href="YAML.src/M000174.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000174.html');return false;">
          <span class="method-name">putobj</span><span class="method-args">(obj)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Calls <a href="YAML.html#M000176">YAML.dump</a>, leaving the Rio open.
</p>
        </div>
      </div>

      <div id="method-M000175" class="method-detail">
        <a name="M000175"></a>

        <div class="method-heading">
          <a href="YAML.src/M000175.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000175.html');return false;">
          <span class="method-name">putobj!</span><span class="method-args">(obj)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Dumps an object to a Rio as with <a href="YAML.html#M000174">putobj</a>,
and closes the Rio.
</p>
<pre>
 rio('afile.yaml').yaml.putobj!(anobject)
</pre>
<p>
is identical to
</p>
<pre>
 rio('afile.yaml').yaml.putobj(anobject).close
</pre>
        </div>
      </div>

      <div id="method-M000169" class="method-detail">
        <a name="M000169"></a>

        <div class="method-heading">
          <a href="YAML.src/M000169.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000169.html');return false;">
          <span class="method-name">skipdocuments</span><span class="method-args">(*selectors,&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Reject documents from a <a href="YAML.html">YAML</a> file. Calls <a
href="GrandeStream.html#M000080">skiprows</a>. See <a
href="YAML.html#M000164">yaml</a> and <a
href="../Doc/INTRO.html">RIO::Doc::INTRO</a>
</p>
        </div>
      </div>

      <div id="method-M000167" class="method-detail">
        <a name="M000167"></a>

        <div class="method-heading">
          <a href="YAML.src/M000167.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000167.html');return false;">
          <span class="method-name">skipobjects</span><span class="method-args">(*selectors,&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Reject objects from a <a href="YAML.html">YAML</a> file. Calls <a
href="GrandeStream.html#M000077">skiprecords</a>. See <a
href="YAML.html#M000164">yaml</a> and <a
href="../Doc/INTRO.html">RIO::Doc::INTRO</a>
</p>
        </div>
      </div>

      <div id="method-M000164" class="method-detail">
        <a name="M000164"></a>

        <div class="method-heading">
          <a href="YAML.src/M000164.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000164.html');return false;">
          <span class="method-name">yaml</span><span class="method-args">(&amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Puts a Rio in <a href="YAML.html">YAML</a> mode.
</p>
<p>
Rio uses the <a href="YAML.html">YAML</a> class from the Ruby standard
library to provide support for reading and writing <a
href="YAML.html">YAML</a> files. Normally using <tt>(skip)records</tt> is
identical to <tt>(skip)lines</tt> because while <tt>records</tt> only
selects and does not specify the record-type, <tt>lines</tt> is the
default.
</p>
<p>
The <a href="YAML.html">YAML</a> extension distingishes between items
selected using <a href="GrandeStream.html#M000076">records</a>, <a
href="GrandeStream.html#M000079">rows</a> and <a
href="GrandeStream.html#M000074">lines</a>. Rio returns objects loaded via
<a href="YAML.html#M000173">YAML#load</a> when <tt>records</tt> or <a
href="YAML.html#M000166">objects</a> is used; returns the <a
href="YAML.html">YAML</a> text as a String when <tt>rows</tt> or <a
href="YAML.html#M000168">documents</a> is used; and returns lines as
Strings as normal when <tt>lines</tt> is used. <tt>records</tt> is the
default.
</p>
<p>
To read a single <a href="YAML.html">YAML</a> document, Rio provides <a
href="YAML.html#M000172">getobj</a> and <a
href="YAML.html#M000173">load</a>. For example, consider the following
partial &#8216;database.yml&#8217; from the rails distribution:
</p>
<pre>
 development:
   adapter: mysql
   database: rails_development

 test:
   adapter: mysql
   database: rails_test
</pre>
<p>
To get the object represented in the yaml file:
</p>
<pre>
 rio('database.yml').yaml.load
    ==&gt;{&quot;development&quot;=&gt;{&quot;adapter&quot;=&gt;&quot;mysql&quot;, &quot;database&quot;=&gt;&quot;rails_development&quot;},
        &quot;test&quot;=&gt;{&quot;adapter&quot;=&gt;&quot;mysql&quot;, &quot;database&quot;=&gt;&quot;rails_test&quot;}}
</pre>
<p>
Or one could read parts of the file like so:
</p>
<pre>
 rio('database.yml').yaml.getobj['development']['database']
    ==&gt;&quot;rails_development&quot;
</pre>
<p>
Single objects can be written using <a href="YAML.html#M000174">putobj</a>
and <a href="YAML.html#M000175">putobj!</a> which is aliased to <a
href="YAML.html#M000176">dump</a>
</p>
<pre>
 anobject = {
   'production' =&gt; {
     'adapter' =&gt; 'mysql',
     'database' =&gt; 'rails_production',
   }
 }
 rio('afile.yaml').yaml.dump(anobject)
</pre>
<p>
Single objects can be written using <a
href="GrandeStream.html#M000085">putrec</a> (aliased to <a
href="YAML.html#M000174">putobj</a> and <a
href="YAML.html#M000176">dump</a>)
</p>
<pre>
 rio('afile.yaml').yaml.putobj(anobject)
</pre>
<p>
Single objects can be loaded using <a
href="GrandeStream.html#M000081">getrec</a> (aliased to <a
href="YAML.html#M000172">getobj</a> and <a
href="YAML.html#M000173">load</a>)
</p>
<pre>
 anobject = rio('afile.yaml').yaml.getobj
</pre>
<p>
A Rio in yaml-mode is just like any other Rio. And all the things you can
do with any Rio come for free. They can be iterated over using <a
href="Grande.html#M000054">each</a> and read into an array using <a
href="Grande.html#M000053">[]</a> just like any other Rio. All the
selection criteria are identical also.
</p>
<p>
Get the first three objects into an array:
</p>
<pre>
 array_of_objects = rio('afile.yaml').yaml[0..2]
</pre>
<p>
Iterate over only <a href="YAML.html">YAML</a> documents that are a kind_of
::Hash:
</p>
<pre>
 rio('afile.yaml').yaml(::Hash) {|ahash| ...}
</pre>
<p>
This takes advantage of the fact that the default for matching records is
<tt>===</tt>
</p>
<p>
Selecting records using a Proc can be used as normal:
</p>
<pre>
 anarray = rio('afile.yaml').yaml(proc{|anobject| ...}).to_a
</pre>
<p>
One could even use the copy operator to convert a <a
href="CSV.html">CSV</a> file to a <a href="YAML.html">YAML</a>
representation of the same data:
</p>
<pre>
 rio('afile.yaml').yaml &lt; rio('afile.csv').csv
</pre>
        </div>
      </div>

      <div id="method-M000165" class="method-detail">
        <a name="M000165"></a>

        <div class="method-heading">
          <a href="YAML.src/M000165.html" target="Code" class="method-signature"
            onclick="popupCode('YAML.src/M000165.html');return false;">
          <span class="method-name">yaml?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Queries if the Rio is in yaml-mode. See <a
href="YAML.html#M000164">yaml</a>
</p>
        </div>
      </div>


    </div>
</div>


  </div>


<div id="validator-badges">
   <p><small>Copyright &copy; 2005,2006,2007,2008 Christopher Kleckner.  <a href="http://www.gnu.org/licenses/gpl.html">All rights reserved</a>.</small></p>
</div>

</body>
</html>